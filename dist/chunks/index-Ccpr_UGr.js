import{r as e,j as s,S as a,h as t,B as n,Y as r,F as l,e as i,R as c,f as d}from"./vendor-react-DP1fVbuu.js";import{I as o}from"../index-rw7h0ijr.js";import"./vendor-icons-DoxuJXhj.js";import"./vendor-firebase-Dc8JVVU0.js";const h=()=>{const[r,l]=e.useState([]);e.useEffect(()=>{const e=localStorage.getItem("leaves");if(e)try{const s=JSON.parse(e);Array.isArray(s)&&s.length>0&&l(s)}catch(s){}},[]);return s.jsx("div",{className:"card",children:s.jsx("div",{className:"card-body p-0",children:s.jsx("div",{className:"table-responsive",children:s.jsxs(a,{striped:!0,hover:!0,className:"mb-0",children:[s.jsx("thead",{className:"table-light",children:s.jsxs("tr",{children:[s.jsx("th",{children:"Employee"}),s.jsx("th",{children:"Type"}),s.jsx("th",{children:"Start Date"}),s.jsx("th",{children:"End Date"}),s.jsx("th",{children:"Reason"}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:r.map(e=>s.jsxs("tr",{children:[s.jsx("td",{children:e.employeeName}),s.jsx("td",{children:e.type}),s.jsx("td",{children:e.startDate}),s.jsx("td",{children:e.endDate}),s.jsx("td",{children:e.reason}),s.jsx("td",{children:s.jsx(t,{bg:"approved"===e.status?"success":"rejected"===e.status?"danger":"warning",children:e.status})}),s.jsx("td",{children:"pending"===e.status&&s.jsxs(s.Fragment,{children:[s.jsx(n,{variant:"success",size:"sm",className:"me-1",onClick:()=>(e=>{const s=r.map(s=>s.id===e?{...s,status:"approved"}:s);l(s),localStorage.setItem("leaves",JSON.stringify(s))})(e.id),children:"Approve"}),s.jsx(n,{variant:"danger",size:"sm",onClick:()=>(e=>{const s=r.map(s=>s.id===e?{...s,status:"rejected"}:s);l(s),localStorage.setItem("leaves",JSON.stringify(s))})(e.id),children:"Reject"})]})})]},e.id))})]})})})})},x=({show:a,onHide:t})=>{const[i,c]=e.useState({type:"vacation",startDate:"",endDate:"",reason:""}),d=e=>{c({...i,[e.target.name]:e.target.value})};return s.jsxs(r,{show:a,onHide:t,children:[s.jsx(r.Header,{closeButton:!0,children:s.jsx(r.Title,{children:"Apply for Leave"})}),s.jsxs(l,{onSubmit:e=>{e.preventDefault();const s=JSON.parse(localStorage.getItem("leaves")||"[]"),a={id:Date.now(),employeeId:1,employeeName:"John Doe",...i,status:"pending"};s.push(a),localStorage.setItem("leaves",JSON.stringify(s)),t(),c({type:"vacation",startDate:"",endDate:"",reason:""}),window.location.reload()},children:[s.jsxs(r.Body,{children:[s.jsxs(l.Group,{className:"mb-3",children:[s.jsx(l.Label,{children:"Leave Type"}),s.jsxs(l.Select,{name:"type",value:i.type,onChange:d,required:!0,children:[s.jsx("option",{value:"vacation",children:"Vacation"}),s.jsx("option",{value:"sick",children:"Sick Leave"}),s.jsx("option",{value:"personal",children:"Personal Leave"})]})]}),s.jsxs(l.Group,{className:"mb-3",children:[s.jsx(l.Label,{children:"Start Date"}),s.jsx(l.Control,{type:"date",name:"startDate",value:i.startDate,onChange:d,required:!0})]}),s.jsxs(l.Group,{className:"mb-3",children:[s.jsx(l.Label,{children:"End Date"}),s.jsx(l.Control,{type:"date",name:"endDate",value:i.endDate,onChange:d,required:!0})]}),s.jsxs(l.Group,{className:"mb-3",children:[s.jsx(l.Label,{children:"Reason"}),s.jsx(l.Control,{as:"textarea",rows:3,name:"reason",value:i.reason,onChange:d,required:!0})]})]}),s.jsxs(r.Footer,{children:[s.jsx(n,{variant:"secondary",onClick:t,children:"Cancel"}),s.jsx(n,{variant:"primary",type:"submit",children:"Apply"})]})]})]})},m=()=>{const[a,t]=e.useState(!1);return s.jsxs("section",{className:"position-relative overflow-hidden bg-gradient2 py-2 px-2",children:[s.jsxs(i,{fluid:!0,className:"px-2 px-md-3 px-lg-4",children:[s.jsx(c,{className:"mb-3",children:s.jsxs(d,{xs:12,className:"d-flex flex-column flex-sm-row justify-content-between align-items-start align-sm-items-center gap-3",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"mb-0 text-primary fs-5 fs-sm-4",children:"Leave Management"}),s.jsx("p",{className:"mt-1 fw-medium text-muted mb-0",children:"Handle leave requests"})]}),s.jsxs(n,{variant:"primary",size:"sm",onClick:()=>t(!0),className:"d-flex align-items-center gap-2 flex-grow-1 flex-sm-grow-0 justify-content-center",children:[s.jsx(o,{icon:"lucide:calendar-plus",height:16,width:16}),"Apply Leave"]})]})}),s.jsx(c,{children:s.jsx(d,{xs:12,children:s.jsx(h,{})})})]}),s.jsx(x,{show:a,onHide:()=>t(!1)})]})};export{m as default};
