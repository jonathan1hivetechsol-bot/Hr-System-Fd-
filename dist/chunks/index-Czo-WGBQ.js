import{d as s,r as a,j as e,A as l,e as i,R as r,f as m,n as d,o as n,L as t,I as o}from"./vendor-react-DP1fVbuu.js";import{A as c}from"./AuthSwiper-CVYsq3Ed.js";import{l as h}from"./logo-1JtIC0mN.js";import{u as x}from"../index-DYVo_VQy.js";import"./vendor-firebase-Dc8JVVU0.js";import"./vendor-icons-DoxuJXhj.js";const N=()=>{const e=s(),{registerAdminUser:l}=x(),[i,r]=a.useState(!1),[m,d]=a.useState({email:"",password:"",confirmPassword:"",adminCode:"",firstName:"",lastName:""}),[n,t]=a.useState({});return{formData:m,errors:n,loading:i,handleChange:s=>{const{name:a,value:e}=s.target;d(s=>({...s,[a]:e})),n[a]&&t(s=>{const e={...s};return delete e[a],e})},handleSubmit:async s=>{if(s.preventDefault(),(()=>{const s={};return m.firstName.trim()||(s.firstName="First name is required"),m.lastName.trim()||(s.lastName="Last name is required"),m.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m.email)||(s.email="Please enter a valid email"):s.email="Email is required",m.password?m.password.length<6&&(s.password="Password must be at least 6 characters"):s.password="Password is required",m.password!==m.confirmPassword&&(s.confirmPassword="Passwords do not match"),m.adminCode?"Hamza0327@@"!==m.adminCode&&(s.adminCode="Invalid admin code - access denied"):s.adminCode="Admin code is required",t(s),0===Object.keys(s).length})()){r(!0);try{const s=`${m.firstName} ${m.lastName}`,a=await l(m.email,m.password,s);a.success?setTimeout(()=>{e("/dashboards/dashboard",{replace:!0})},500):t({submit:a.error||"Registration failed. Please try again."})}catch(a){t({submit:a instanceof Error?a.message:"An error occurred during registration"})}finally{r(!1)}}}}},j=()=>{const{formData:s,errors:a,loading:i,handleChange:r,handleSubmit:m}=N();return e.jsxs("form",{onSubmit:m,className:"authentication-form",children:[e.jsxs(l,{variant:"warning",className:"mb-4",children:[e.jsx("strong",{children:"Admin Registration:"})," This is a protected area. Only authorized personnel with the admin code can register as administrator."]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"adminCode",className:"form-label",children:["Admin Code ",e.jsx("small",{children:"*"})]}),e.jsx("input",{type:"password",className:"form-control "+(a.adminCode?"is-invalid":""),id:"adminCode",placeholder:"Enter admin secret code",name:"adminCode",value:s.adminCode,onChange:r,disabled:i}),a.adminCode&&e.jsx("small",{className:"text-danger d-block mt-1",children:a.adminCode}),e.jsx("small",{className:"text-muted d-block mt-1",children:"You must have the admin code to proceed"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"adminFirstName",className:"form-label",children:["First Name ",e.jsx("small",{children:"*"})]}),e.jsx("input",{type:"text",className:"form-control "+(a.firstName?"is-invalid":""),id:"adminFirstName",placeholder:"First Name",name:"firstName",value:s.firstName,onChange:r,disabled:i}),a.firstName&&e.jsx("small",{className:"text-danger d-block mt-1",children:a.firstName})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"adminLastName",className:"form-label",children:["Last Name ",e.jsx("small",{children:"*"})]}),e.jsx("input",{type:"text",className:"form-control "+(a.lastName?"is-invalid":""),id:"adminLastName",placeholder:"Last Name",name:"lastName",value:s.lastName,onChange:r,disabled:i}),a.lastName&&e.jsx("small",{className:"text-danger d-block mt-1",children:a.lastName})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"adminRegEmail",className:"form-label",children:["Email ",e.jsx("small",{children:"*"})]}),e.jsx("input",{type:"email",className:"form-control "+(a.email?"is-invalid":""),id:"adminRegEmail",placeholder:"Email",name:"email",value:s.email,onChange:r,disabled:i}),a.email&&e.jsx("small",{className:"text-danger d-block mt-1",children:a.email})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"adminRegPassword",className:"form-label",children:["Password ",e.jsx("small",{children:"*"})]}),e.jsx("input",{type:"password",className:"form-control "+(a.password?"is-invalid":""),id:"adminRegPassword",placeholder:"Enter password",name:"password",value:s.password,onChange:r,disabled:i}),a.password&&e.jsx("small",{className:"text-danger d-block mt-1",children:a.password})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"adminRegConfirmPassword",className:"form-label",children:["Confirm Password ",e.jsx("small",{children:"*"})]}),e.jsx("input",{type:"password",className:"form-control "+(a.confirmPassword?"is-invalid":""),id:"adminRegConfirmPassword",placeholder:"Confirm password",name:"confirmPassword",value:s.confirmPassword,onChange:r,disabled:i}),a.confirmPassword&&e.jsx("small",{className:"text-danger d-block mt-1",children:a.confirmPassword})]}),a.submit&&e.jsx("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:a.submit}),e.jsx("div",{className:"mb-0 text-center d-grid",children:e.jsx("button",{className:"btn btn-primary",type:"submit",disabled:i,children:i?"Registering Admin...":"Register as Admin"})})]})},p=()=>e.jsx("div",{className:"bg-gradient2 min-vh-100 align-items-center d-flex justify-content-center pt-2 pt-sm-5 pb-4 pb-sm-5",children:e.jsx(i,{children:e.jsx(r,{className:"justify-content-center",children:e.jsxs(m,{xl:12,children:[e.jsx(d,{children:e.jsx(n,{className:"p-0",children:e.jsxs(r,{className:"g-0",children:[e.jsx(m,{md:5,className:"shadow",children:e.jsxs("div",{className:"p-xl-5 p-3",children:[e.jsx("div",{className:"mx-auto mb-5",children:e.jsx(t,{to:"/",className:"d-flex",children:e.jsx(o,{src:h,className:"align-self-center",alt:"logo-img",height:30})})}),e.jsx("h6",{className:"h5 mb-0 mt-3",children:"Register as Admin"}),e.jsx("p",{className:"text-muted mt-1 mb-4",children:"Create your admin account to manage the system."}),e.jsx(j,{})]})}),e.jsx(m,{md:5,className:"offset-md-1 d-none d-md-inline-block",children:e.jsx("div",{className:"position-relative mt-5 pt-5",children:e.jsx(c,{})})})]})})}),e.jsx(r,{className:"mt-3",children:e.jsx(m,{xs:12,className:"text-center",children:e.jsxs("p",{className:"text-muted",children:["Already have an account?"," ",e.jsx(t,{to:"/auth/admin-login",className:"text-primary fw-semibold ms-1",children:"Sign In"})]})})})]})})})});export{p as default};
