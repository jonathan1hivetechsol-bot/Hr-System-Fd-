import{X as s,r as e,j as a,e as n,L as i,R as r,f as c,B as t,I as d,h as l}from"./vendor-react-DP1fVbuu.js";import{b as o,c as m,e as h,g as j}from"../index-DYVo_VQy.js";import{E as x}from"./EditEmployeeModal-CYt4n-QT.js";import"./vendor-icons-DoxuJXhj.js";import"./vendor-firebase-Dc8JVVU0.js";const p=()=>{const{id:p}=s(),{canEditEmployee:u}=o(),[y,f]=e.useState(null),[N,b]=e.useState(!0),[g,v]=e.useState(!1);return e.useEffect(()=>{if(!p)return;(async()=>{b(!0);const s=await j("employees",p);s.success&&s.data?f(s.data):f(null),b(!1)})()},[p]),N?a.jsx(n,{children:"Loading..."}):y?a.jsxs("section",{className:"py-3",children:[a.jsxs(n,{children:[a.jsx(r,{className:"mb-3",children:a.jsxs(c,{xs:12,className:"d-flex justify-content-between align-items-center",children:[a.jsx("h4",{className:"mb-0",children:y.name}),a.jsxs("div",{children:[a.jsx(i,{to:"/employees",className:"btn btn-light me-2",children:"Back"}),u(y.id)&&a.jsx(t,{onClick:()=>v(!0),variant:"primary",children:"Edit Profile"})]})]})}),a.jsxs(r,{children:[a.jsxs(c,{md:4,className:"text-center",children:[a.jsx(d,{src:y.avatar,roundedCircle:!0,height:140,width:140}),a.jsx("h5",{className:"mt-2",children:y.position}),a.jsx(l,{bg:"secondary",children:y.department})]}),a.jsxs(c,{md:8,children:[a.jsxs(r,{className:"mb-2",children:[a.jsx(c,{sm:4,children:a.jsx("strong",{children:"Email"})}),a.jsx(c,{sm:8,children:y.email})]}),a.jsxs(r,{className:"mb-2",children:[a.jsx(c,{sm:4,children:a.jsx("strong",{children:"Phone"})}),a.jsx(c,{sm:8,children:y.phone||"Not provided"})]}),a.jsxs(r,{className:"mb-2",children:[a.jsx(c,{sm:4,children:a.jsx("strong",{children:"Address"})}),a.jsx(c,{sm:8,children:y.address||"Not provided"})]}),a.jsxs(r,{className:"mb-2",children:[a.jsx(c,{sm:4,children:a.jsx("strong",{children:"Joined"})}),a.jsx(c,{sm:8,children:y.hireDate})]})]})]})]}),a.jsx(x,{show:g,onHide:()=>v(!1),employee:y,onSave:async(s,e,a,n)=>{try{let i;if(a){const e=await m(s,a,n);e.success&&(i=e.data)}const r={...e};i&&(r.avatar=i),await h(s,r);const c=await j("employees",s);c.success&&c.data&&f(c.data)}catch(i){throw i}}})]}):a.jsxs(n,{children:["Employee not found. ",a.jsx(i,{to:"/employees",children:"Back to list"})]})};export{p as default};
