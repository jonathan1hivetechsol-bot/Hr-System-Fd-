import{r as e,j as s,Y as a,F as n,I as t,P as r,B as l}from"./vendor-react-DP1fVbuu.js";const i=({show:i,onHide:o,employee:d,onSave:c})=>{const[m,h]=e.useState({name:d.name||"",phone:d.phone||"",address:d.address||"",position:d.position||"",department:d.department||""}),[j,x]=e.useState(null),[u,p]=e.useState(!1),[b,v]=e.useState(null),[g,C]=e.useState(0);e.useEffect(()=>{if(j){const e=URL.createObjectURL(j);return v(e),()=>URL.revokeObjectURL(e)}v(null)},[j]);const f=e=>{h({...m,[e.target.name]:e.target.value})};return s.jsxs(a,{show:i,onHide:o,centered:!0,children:[s.jsx(a.Header,{closeButton:!0,children:s.jsx(a.Title,{children:"Edit Profile"})}),s.jsxs(n,{onSubmit:async e=>{e.preventDefault(),p(!0);try{await c(d.id,{...m},j,e=>{C(e)}),o()}catch(s){}finally{p(!1)}},children:[s.jsxs(a.Body,{children:[s.jsx("div",{className:"text-center mb-3",children:s.jsx(t,{src:b||d.avatar,roundedCircle:!0,height:80,width:80})}),s.jsxs(n.Group,{className:"mb-2",children:[s.jsx(n.Label,{children:"Full Name"}),s.jsx(n.Control,{name:"name",value:m.name,onChange:f})]}),s.jsxs(n.Group,{className:"mb-2",children:[s.jsx(n.Label,{children:"Phone"}),s.jsx(n.Control,{name:"phone",value:m.phone,onChange:f})]}),s.jsxs(n.Group,{className:"mb-2",children:[s.jsx(n.Label,{children:"Address"}),s.jsx(n.Control,{name:"address",value:m.address,onChange:f})]}),s.jsxs(n.Group,{className:"mb-2",children:[s.jsx(n.Label,{children:"Position"}),s.jsx(n.Control,{name:"position",value:m.position,onChange:f})]}),s.jsxs(n.Group,{className:"mb-2",children:[s.jsx(n.Label,{children:"Department"}),s.jsx(n.Control,{name:"department",value:m.department,onChange:f})]}),s.jsxs(n.Group,{className:"mb-2",children:[s.jsx(n.Label,{children:"Avatar"}),s.jsx(n.Control,{type:"file",accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]&&x(e.target.files[0])}}),j&&s.jsxs("div",{className:"mt-2",children:[s.jsx("small",{className:"text-muted d-block mb-1",children:"Preview"}),s.jsx("div",{className:"mb-2",children:s.jsx(t,{src:b,rounded:!0,height:60,width:60})}),s.jsx(r,{now:g,label:`${g}%`})]})]})]}),s.jsxs(a.Footer,{children:[s.jsx(l,{variant:"secondary",onClick:o,disabled:u,children:"Cancel"}),s.jsx(l,{variant:"primary",type:"submit",disabled:u,children:u?"Saving...":"Save"})]})]})]})};export{i as E};
