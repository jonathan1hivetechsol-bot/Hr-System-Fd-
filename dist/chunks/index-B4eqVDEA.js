import{r as e,j as s,A as a,Z as l,S as r,h as n,B as t,Y as i,F as o,e as c,R as d,f as h}from"./vendor-react-DP1fVbuu.js";import{I as m}from"../index-BZeppaX_.js";import"./vendor-icons-DoxuJXhj.js";import"./vendor-firebase-Dc8JVVU0.js";const x=()=>{const[i,o]=e.useState([]),[c,d]=e.useState(!0),[h,m]=e.useState(null);e.useEffect(()=>{try{const e=localStorage.getItem("payrolls");e&&o(JSON.parse(e))}catch(e){m("Failed to load payroll data")}finally{d(!1)}},[]);return s.jsxs("div",{className:"card",children:[h&&s.jsx(a,{variant:"danger",className:"m-3",children:h}),c?s.jsx("div",{className:"d-flex justify-content-center align-items-center p-5",children:s.jsx(l,{animation:"border"})}):s.jsx("div",{className:"card-body p-0",children:s.jsx("div",{className:"table-responsive",children:s.jsxs(r,{striped:!0,hover:!0,className:"mb-0",children:[s.jsx("thead",{className:"table-light",children:s.jsxs("tr",{children:[s.jsx("th",{children:"Employee"}),s.jsx("th",{children:"Month/Year"}),s.jsx("th",{children:"Basic Salary"}),s.jsx("th",{children:"Allowances"}),s.jsx("th",{children:"Deductions"}),s.jsx("th",{children:"Net Salary"}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:i.length>0?i.map(e=>s.jsxs("tr",{children:[s.jsx("td",{children:e.employeeName}),s.jsxs("td",{children:[e.month," ",e.year]}),s.jsxs("td",{children:["$",e.basicSalary.toLocaleString()]}),s.jsxs("td",{children:["$",e.allowances.toLocaleString()]}),s.jsxs("td",{children:["$",e.deductions.toLocaleString()]}),s.jsxs("td",{children:["$",e.netSalary.toLocaleString()]}),s.jsx("td",{children:s.jsx(n,{bg:"paid"===e.status?"success":"warning",children:e.status})}),s.jsx("td",{children:"pending"===e.status&&s.jsx(t,{variant:"success",size:"sm",onClick:()=>(e=>{const s=i.map(s=>s.id===e?{...s,status:"paid"}:s);o(s),localStorage.setItem("payrolls",JSON.stringify(s))})(e.id),children:"Mark Paid"})})]},e.id)):s.jsx("tr",{children:s.jsx("td",{colSpan:8,className:"text-center py-4",children:"No payroll records. Generate payroll to get started."})})})]})})})]})},j=({show:a,onHide:l})=>{const[r,n]=e.useState({employeeId:"",month:"",year:"",basicSalary:"",allowances:"",deductions:""}),c=e=>{n({...r,[e.target.name]:e.target.value})},d=JSON.parse(localStorage.getItem("employees")||"[]");return s.jsxs(i,{show:a,onHide:l,children:[s.jsx(i.Header,{closeButton:!0,children:s.jsx(i.Title,{children:"Generate Payroll"})}),s.jsxs(o,{onSubmit:e=>{e.preventDefault();const s=JSON.parse(localStorage.getItem("payrolls")||"[]"),a=JSON.parse(localStorage.getItem("employees")||"[]").find(e=>e.id===r.employeeId),t=parseFloat(r.basicSalary),i=parseFloat(r.allowances),o=parseFloat(r.deductions),c=t+i-o,d={id:Date.now(),employeeId:parseInt(r.employeeId),employeeName:a?.name||"Unknown",month:r.month,year:parseInt(r.year),basicSalary:t,allowances:i,deductions:o,netSalary:c,status:"pending"};s.push(d),localStorage.setItem("payrolls",JSON.stringify(s)),l(),n({employeeId:"",month:"",year:"",basicSalary:"",allowances:"",deductions:""}),window.location.reload()},children:[s.jsxs(i.Body,{children:[s.jsxs(o.Group,{className:"mb-3",children:[s.jsx(o.Label,{children:"Employee"}),s.jsxs(o.Select,{name:"employeeId",value:r.employeeId,onChange:c,required:!0,children:[s.jsx("option",{value:"",children:"Select Employee"}),d.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]})]}),s.jsxs(o.Group,{className:"mb-3",children:[s.jsx(o.Label,{children:"Month"}),s.jsxs(o.Select,{name:"month",value:r.month,onChange:c,required:!0,children:[s.jsx("option",{value:"",children:"Select Month"}),s.jsx("option",{value:"January",children:"January"}),s.jsx("option",{value:"February",children:"February"}),s.jsx("option",{value:"March",children:"March"}),s.jsx("option",{value:"April",children:"April"}),s.jsx("option",{value:"May",children:"May"}),s.jsx("option",{value:"June",children:"June"}),s.jsx("option",{value:"July",children:"July"}),s.jsx("option",{value:"August",children:"August"}),s.jsx("option",{value:"September",children:"September"}),s.jsx("option",{value:"October",children:"October"}),s.jsx("option",{value:"November",children:"November"}),s.jsx("option",{value:"December",children:"December"})]})]}),s.jsxs(o.Group,{className:"mb-3",children:[s.jsx(o.Label,{children:"Year"}),s.jsx(o.Control,{type:"number",name:"year",value:r.year,onChange:c,required:!0})]}),s.jsxs(o.Group,{className:"mb-3",children:[s.jsx(o.Label,{children:"Basic Salary"}),s.jsx(o.Control,{type:"number",name:"basicSalary",value:r.basicSalary,onChange:c,required:!0})]}),s.jsxs(o.Group,{className:"mb-3",children:[s.jsx(o.Label,{children:"Allowances"}),s.jsx(o.Control,{type:"number",name:"allowances",value:r.allowances,onChange:c,required:!0})]}),s.jsxs(o.Group,{className:"mb-3",children:[s.jsx(o.Label,{children:"Deductions"}),s.jsx(o.Control,{type:"number",name:"deductions",value:r.deductions,onChange:c,required:!0})]})]}),s.jsxs(i.Footer,{children:[s.jsx(t,{variant:"secondary",onClick:l,children:"Cancel"}),s.jsx(t,{variant:"primary",type:"submit",children:"Generate"})]})]})]})},p=()=>{const[a,l]=e.useState(!1);return s.jsxs("section",{className:"position-relative overflow-hidden bg-gradient2 py-2 px-2",children:[s.jsxs(c,{fluid:!0,className:"px-2 px-md-3 px-lg-4",children:[s.jsx(d,{className:"mb-3",children:s.jsxs(h,{xs:12,className:"d-flex flex-column flex-sm-row justify-content-between align-items-start align-sm-items-center gap-3",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"mb-0 text-primary fs-5 fs-sm-4",children:"Payroll Management"}),s.jsx("p",{className:"mt-1 fw-medium text-muted mb-0",children:"Process employee salaries"})]}),s.jsxs(t,{variant:"primary",size:"sm",onClick:()=>l(!0),className:"d-flex align-items-center gap-2 flex-grow-1 flex-sm-grow-0 justify-content-center",children:[s.jsx(m,{icon:"lucide:dollar-sign",height:16,width:16}),"Generate Payroll"]})]})}),s.jsx(d,{children:s.jsx(h,{xs:12,children:s.jsx(x,{})})})]}),s.jsx(j,{show:a,onHide:()=>l(!1)})]})};export{p as default};
