import{r as h,j as e,v as u,B as o,P as a,C as g,R as m,a as p,I as v}from"./index-oF94shAn.js";import{T as y}from"./Table-FLAXzD0V.js";import{M as c}from"./Modal-Cn1xx1qV.js";import"./NoopTransition-D_1AYpEs.js";const f=()=>{const[i,n]=h.useState([]);h.useEffect(()=>{const s=localStorage.getItem("leaves");if(s)try{const t=JSON.parse(s);Array.isArray(t)&&t.length>0&&n(t)}catch(t){console.error("Error loading leaves:",t)}},[]);const l=s=>{const t=i.map(r=>r.id===s?{...r,status:"approved"}:r);n(t),localStorage.setItem("leaves",JSON.stringify(t))},d=s=>{const t=i.map(r=>r.id===s?{...r,status:"rejected"}:r);n(t),localStorage.setItem("leaves",JSON.stringify(t))};return e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-body p-0",children:e.jsx("div",{className:"table-responsive",children:e.jsxs(y,{striped:!0,hover:!0,className:"mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Employee"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Start Date"}),e.jsx("th",{children:"End Date"}),e.jsx("th",{children:"Reason"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:i.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.employeeName}),e.jsx("td",{children:s.type}),e.jsx("td",{children:s.startDate}),e.jsx("td",{children:s.endDate}),e.jsx("td",{children:s.reason}),e.jsx("td",{children:e.jsx(u,{bg:s.status==="approved"?"success":s.status==="rejected"?"danger":"warning",children:s.status})}),e.jsx("td",{children:s.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(o,{variant:"success",size:"sm",className:"me-1",onClick:()=>l(s.id),children:"Approve"}),e.jsx(o,{variant:"danger",size:"sm",onClick:()=>d(s.id),children:"Reject"})]})})]},s.id))})]})})})})},N=({show:i,onHide:n})=>{const[l,d]=h.useState({type:"vacation",startDate:"",endDate:"",reason:""}),s=r=>{d({...l,[r.target.name]:r.target.value})},t=r=>{r.preventDefault();const x=JSON.parse(localStorage.getItem("leaves")||"[]"),j={id:Date.now(),employeeId:1,employeeName:"John Doe",...l,status:"pending"};x.push(j),localStorage.setItem("leaves",JSON.stringify(x)),n(),d({type:"vacation",startDate:"",endDate:"",reason:""}),window.location.reload()};return e.jsxs(c,{show:i,onHide:n,children:[e.jsx(c.Header,{closeButton:!0,children:e.jsx(c.Title,{children:"Apply for Leave"})}),e.jsxs(a,{onSubmit:t,children:[e.jsxs(c.Body,{children:[e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"Leave Type"}),e.jsxs(a.Select,{name:"type",value:l.type,onChange:s,required:!0,children:[e.jsx("option",{value:"vacation",children:"Vacation"}),e.jsx("option",{value:"sick",children:"Sick Leave"}),e.jsx("option",{value:"personal",children:"Personal Leave"})]})]}),e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"Start Date"}),e.jsx(a.Control,{type:"date",name:"startDate",value:l.startDate,onChange:s,required:!0})]}),e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"End Date"}),e.jsx(a.Control,{type:"date",name:"endDate",value:l.endDate,onChange:s,required:!0})]}),e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"Reason"}),e.jsx(a.Control,{as:"textarea",rows:3,name:"reason",value:l.reason,onChange:s,required:!0})]})]}),e.jsxs(c.Footer,{children:[e.jsx(o,{variant:"secondary",onClick:n,children:"Cancel"}),e.jsx(o,{variant:"primary",type:"submit",children:"Apply"})]})]})]})},C=()=>{const[i,n]=h.useState(!1);return e.jsxs("section",{className:"position-relative overflow-hidden bg-gradient2 py-2 px-2",children:[e.jsxs(g,{fluid:!0,className:"px-2 px-md-3 px-lg-4",children:[e.jsx(m,{className:"mb-3",children:e.jsxs(p,{xs:12,className:"d-flex flex-column flex-sm-row justify-content-between align-items-start align-sm-items-center gap-3",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"mb-0 text-primary fs-5 fs-sm-4",children:"Leave Management"}),e.jsx("p",{className:"mt-1 fw-medium text-muted mb-0",children:"Handle leave requests"})]}),e.jsxs(o,{variant:"primary",size:"sm",onClick:()=>n(!0),className:"d-flex align-items-center gap-2 flex-grow-1 flex-sm-grow-0 justify-content-center",children:[e.jsx(v,{icon:"lucide:calendar-plus",height:16,width:16}),"Apply Leave"]})]})}),e.jsx(m,{children:e.jsx(p,{xs:12,children:e.jsx(f,{})})})]}),e.jsx(N,{show:i,onHide:()=>n(!1)})]})};export{C as default};
