import{u as g,h as w,r as h,j as s,A as v,C,R as x,a as o,L as u}from"./index-oF94shAn.js";import{A as y}from"./AuthSwiper-7F7oupBW.js";import{l as P}from"./logo-BJuW9rqy.js";import{C as R,a as A}from"./Card-BhaUZ5Ll.js";import{I as E}from"./Image-v3hKazYp.js";const F="Hamza0327@@",k=()=>{const m=g(),{registerAdminUser:e}=w(),[i,l]=h.useState(!1),[a,j]=h.useState({email:"",password:"",confirmPassword:"",adminCode:"",firstName:"",lastName:""}),[N,d]=h.useState({}),p=r=>{const{name:t,value:n}=r.target;j(c=>({...c,[t]:n})),N[t]&&d(c=>{const f={...c};return delete f[t],f})},b=()=>{const r={};return a.firstName.trim()||(r.firstName="First name is required"),a.lastName.trim()||(r.lastName="Last name is required"),a.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(r.email="Please enter a valid email"):r.email="Email is required",a.password?a.password.length<6&&(r.password="Password must be at least 6 characters"):r.password="Password is required",a.password!==a.confirmPassword&&(r.confirmPassword="Passwords do not match"),a.adminCode?a.adminCode!==F&&(r.adminCode="Invalid admin code - access denied"):r.adminCode="Admin code is required",d(r),Object.keys(r).length===0};return{formData:a,errors:N,loading:i,handleChange:p,handleSubmit:async r=>{if(r.preventDefault(),!!b()){l(!0);try{const t=`${a.firstName} ${a.lastName}`,n=await e(a.email,a.password,t);n.success?setTimeout(()=>{m("/dashboards/dashboard",{replace:!0})},500):d({submit:n.error||"Registration failed. Please try again."})}catch(t){d({submit:t instanceof Error?t.message:"An error occurred during registration"})}finally{l(!1)}}}}},S=()=>{const{formData:m,errors:e,loading:i,handleChange:l,handleSubmit:a}=k();return s.jsxs("form",{onSubmit:a,className:"authentication-form",children:[s.jsxs(v,{variant:"warning",className:"mb-4",children:[s.jsx("strong",{children:"Admin Registration:"})," This is a protected area. Only authorized personnel with the admin code can register as administrator."]}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("label",{htmlFor:"adminCode",className:"form-label",children:["Admin Code ",s.jsx("small",{children:"*"})]}),s.jsx("input",{type:"password",className:`form-control ${e.adminCode?"is-invalid":""}`,id:"adminCode",placeholder:"Enter admin secret code",name:"adminCode",value:m.adminCode,onChange:l,disabled:i}),e.adminCode&&s.jsx("small",{className:"text-danger d-block mt-1",children:e.adminCode}),s.jsx("small",{className:"text-muted d-block mt-1",children:"You must have the admin code to proceed"})]}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("label",{htmlFor:"adminFirstName",className:"form-label",children:["First Name ",s.jsx("small",{children:"*"})]}),s.jsx("input",{type:"text",className:`form-control ${e.firstName?"is-invalid":""}`,id:"adminFirstName",placeholder:"First Name",name:"firstName",value:m.firstName,onChange:l,disabled:i}),e.firstName&&s.jsx("small",{className:"text-danger d-block mt-1",children:e.firstName})]}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("label",{htmlFor:"adminLastName",className:"form-label",children:["Last Name ",s.jsx("small",{children:"*"})]}),s.jsx("input",{type:"text",className:`form-control ${e.lastName?"is-invalid":""}`,id:"adminLastName",placeholder:"Last Name",name:"lastName",value:m.lastName,onChange:l,disabled:i}),e.lastName&&s.jsx("small",{className:"text-danger d-block mt-1",children:e.lastName})]}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("label",{htmlFor:"adminRegEmail",className:"form-label",children:["Email ",s.jsx("small",{children:"*"})]}),s.jsx("input",{type:"email",className:`form-control ${e.email?"is-invalid":""}`,id:"adminRegEmail",placeholder:"Email",name:"email",value:m.email,onChange:l,disabled:i}),e.email&&s.jsx("small",{className:"text-danger d-block mt-1",children:e.email})]}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("label",{htmlFor:"adminRegPassword",className:"form-label",children:["Password ",s.jsx("small",{children:"*"})]}),s.jsx("input",{type:"password",className:`form-control ${e.password?"is-invalid":""}`,id:"adminRegPassword",placeholder:"Enter password",name:"password",value:m.password,onChange:l,disabled:i}),e.password&&s.jsx("small",{className:"text-danger d-block mt-1",children:e.password})]}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("label",{htmlFor:"adminRegConfirmPassword",className:"form-label",children:["Confirm Password ",s.jsx("small",{children:"*"})]}),s.jsx("input",{type:"password",className:`form-control ${e.confirmPassword?"is-invalid":""}`,id:"adminRegConfirmPassword",placeholder:"Confirm password",name:"confirmPassword",value:m.confirmPassword,onChange:l,disabled:i}),e.confirmPassword&&s.jsx("small",{className:"text-danger d-block mt-1",children:e.confirmPassword})]}),e.submit&&s.jsx("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:e.submit}),s.jsx("div",{className:"mb-0 text-center d-grid",children:s.jsx("button",{className:"btn btn-primary",type:"submit",disabled:i,children:i?"Registering Admin...":"Register as Admin"})})]})},T=()=>s.jsx("div",{className:"bg-gradient2 min-vh-100 align-items-center d-flex justify-content-center pt-2 pt-sm-5 pb-4 pb-sm-5",children:s.jsx(C,{children:s.jsx(x,{className:"justify-content-center",children:s.jsxs(o,{xl:12,children:[s.jsx(R,{children:s.jsx(A,{className:"p-0",children:s.jsxs(x,{className:"g-0",children:[s.jsx(o,{md:5,className:"shadow",children:s.jsxs("div",{className:"p-xl-5 p-3",children:[s.jsx("div",{className:"mx-auto mb-5",children:s.jsx(u,{to:"/",className:"d-flex",children:s.jsx(E,{src:P,className:"align-self-center",alt:"logo-img",height:30})})}),s.jsx("h6",{className:"h5 mb-0 mt-3",children:"Register as Admin"}),s.jsx("p",{className:"text-muted mt-1 mb-4",children:"Create your admin account to manage the system."}),s.jsx(S,{})]})}),s.jsx(o,{md:5,className:"offset-md-1 d-none d-md-inline-block",children:s.jsx("div",{className:"position-relative mt-5 pt-5",children:s.jsx(y,{})})})]})})}),s.jsx(x,{className:"mt-3",children:s.jsx(o,{xs:12,className:"text-center",children:s.jsxs("p",{className:"text-muted",children:["Already have an account?"," ",s.jsx(u,{to:"/auth/admin-login",className:"text-primary fw-semibold ms-1",children:"Sign In"})]})})})]})})})});export{T as default};
