import{u as b,h as w,r as h,j as e,C as y,R as p,a as c,L as u}from"./index-oF94shAn.js";import{A as v}from"./AuthSwiper-7F7oupBW.js";import{l as P}from"./logo-BJuW9rqy.js";import{C,a as R}from"./Card-BhaUZ5Ll.js";import{I as E}from"./Image-v3hKazYp.js";const F=()=>{const m=b(),{registerEmployeeUser:a}=w(),[o,t]=h.useState(!1),[s,x]=h.useState({email:"",password:"",confirmPassword:"",firstName:"",lastName:""}),[f,n]=h.useState({}),g=r=>{const{name:l,value:i}=r.target;x(d=>({...d,[l]:i})),f[l]&&n(d=>{const N={...d};return delete N[l],N})},j=()=>{const r={};return s.firstName.trim()||(r.firstName="First name is required"),s.lastName.trim()||(r.lastName="Last name is required"),s.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)||(r.email="Please enter a valid email"):r.email="Email is required",s.password?s.password.length<6&&(r.password="Password must be at least 6 characters"):r.password="Password is required",s.password!==s.confirmPassword&&(r.confirmPassword="Passwords do not match"),n(r),Object.keys(r).length===0};return{formData:s,errors:f,loading:o,handleChange:g,handleSubmit:async r=>{if(r.preventDefault(),!!j()){t(!0),n({});try{const l=`${s.firstName} ${s.lastName}`;console.log("Starting employee registration:",{email:s.email,displayName:l});const i=await a(s.email,s.password,l);console.log("Registration result:",i),i.success?(console.log("Registration successful, redirecting to profile completion..."),x({email:"",password:"",confirmPassword:"",firstName:"",lastName:""}),setTimeout(()=>{m("/auth/employee-profile-complete",{replace:!0})},500)):(console.error("Registration failed:",i.error),n({submit:i.error||"Registration failed. Please try again."}),t(!1))}catch(l){console.error("Registration error:",l);const i=l instanceof Error?l.message:"An error occurred during registration";n({submit:i}),t(!1)}}}}},S=()=>{const{formData:m,errors:a,loading:o,handleChange:t,handleSubmit:s}=F();return e.jsxs("form",{onSubmit:s,className:"authentication-form",children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"empFirstName",className:"form-label",children:["First Name ",e.jsx("small",{children:"*"})]}),e.jsx("input",{type:"text",className:"form-control",id:"empFirstName",placeholder:"First Name",name:"firstName",value:m.firstName,onChange:t}),a.firstName&&e.jsx("small",{className:"text-danger",children:a.firstName})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"empLastName",className:"form-label",children:["Last Name ",e.jsx("small",{children:"*"})]}),e.jsx("input",{type:"text",className:"form-control",id:"empLastName",placeholder:"Last Name",name:"lastName",value:m.lastName,onChange:t}),a.lastName&&e.jsx("small",{className:"text-danger",children:a.lastName})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"empRegEmail",className:"form-label",children:["Email ",e.jsx("small",{children:"*"})]}),e.jsx("input",{type:"email",className:"form-control",id:"empRegEmail",placeholder:"Email",name:"email",value:m.email,onChange:t}),a.email&&e.jsx("small",{className:"text-danger",children:a.email})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"empRegPassword",className:"form-label",children:["Password ",e.jsx("small",{children:"*"})]}),e.jsx("input",{type:"password",className:"form-control",id:"empRegPassword",placeholder:"Enter password",name:"password",value:m.password,onChange:t}),a.password&&e.jsx("small",{className:"text-danger",children:a.password})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"empRegConfirmPassword",className:"form-label",children:["Confirm Password ",e.jsx("small",{children:"*"})]}),e.jsx("input",{type:"password",className:"form-control",id:"empRegConfirmPassword",placeholder:"Confirm password",name:"confirmPassword",value:m.confirmPassword,onChange:t}),a.confirmPassword&&e.jsx("small",{className:"text-danger",children:a.confirmPassword})]}),a.submit&&e.jsx("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:a.submit}),e.jsx("div",{className:"mb-0 text-center d-grid",children:e.jsx("button",{className:"btn btn-primary",type:"submit",disabled:o,style:{opacity:o?.6:1,cursor:o?"not-allowed":"pointer"},children:o?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Registering..."]}):"Sign Up"})})]})},$=()=>e.jsx("div",{className:"bg-gradient2 min-vh-100 align-items-center d-flex justify-content-center pt-2 pt-sm-5 pb-4 pb-sm-5",children:e.jsx(y,{children:e.jsx(p,{className:"justify-content-center",children:e.jsxs(c,{xl:12,children:[e.jsx(C,{children:e.jsx(R,{className:"p-0",children:e.jsxs(p,{className:"g-0",children:[e.jsx(c,{md:5,className:"shadow",children:e.jsxs("div",{className:"p-xl-5 p-3",children:[e.jsx("div",{className:"mx-auto mb-5",children:e.jsx(u,{to:"/",className:"d-flex",children:e.jsx(E,{src:P,className:"align-self-center",alt:"logo-img",height:30})})}),e.jsx("h6",{className:"h5 mb-0 mt-3",children:"Create Account"}),e.jsx("p",{className:"text-muted mt-1 mb-4",children:"Sign up to get started with your employee account."}),e.jsx(S,{})]})}),e.jsx(c,{md:5,className:"offset-md-1 d-none d-md-inline-block",children:e.jsx("div",{className:"position-relative mt-5 pt-5",children:e.jsx(v,{})})})]})})}),e.jsx(p,{className:"mt-3",children:e.jsx(c,{xs:12,className:"text-center",children:e.jsxs("p",{className:"text-muted",children:["Already have an account?"," ",e.jsx(u,{to:"/auth/employee-login",className:"text-primary fw-semibold ms-1",children:"Sign In"})]})})})]})})})});export{$ as default};
