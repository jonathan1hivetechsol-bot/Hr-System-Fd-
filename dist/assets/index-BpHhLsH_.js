import{u as b,h as w,r as h,j as e,C as y,R as p,a as d,L as f}from"./index-dL9z54sq.js";import{A as v}from"./AuthSwiper-B7LkAo8n.js";import{l as P}from"./logo-BJuW9rqy.js";import{C as R,a as C}from"./Card-C6qceAz5.js";import{I as E}from"./Image-DvIYfsrT.js";const F=()=>{const o=b(),{registerEmployeeUser:a}=w(),[n,t]=h.useState(!1),[s,u]=h.useState({email:"",password:"",confirmPassword:"",firstName:"",lastName:""}),[x,c]=h.useState({}),N=r=>{const{name:m,value:i}=r.target;u(l=>({...l,[m]:i})),x[m]&&c(l=>{const g={...l};return delete g[m],g})},j=()=>{const r={};return s.firstName.trim()||(r.firstName="First name is required"),s.lastName.trim()||(r.lastName="Last name is required"),s.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)||(r.email="Please enter a valid email"):r.email="Email is required",s.password?s.password.length<6&&(r.password="Password must be at least 6 characters"):r.password="Password is required",s.password!==s.confirmPassword&&(r.confirmPassword="Passwords do not match"),c(r),Object.keys(r).length===0};return{formData:s,errors:x,loading:n,handleChange:N,handleSubmit:async r=>{if(r.preventDefault(),!j())return;t(!0),c({});const m=setTimeout(()=>{console.error("Registration timeout - taking too long"),t(!1),c({submit:"Registration is taking too long. Please check your connection and try again."})},3e4);try{const i=`${s.firstName} ${s.lastName}`;console.log("Starting employee registration:",{email:s.email,displayName:i});const l=await a(s.email,s.password,i);clearTimeout(m),console.log("Registration result:",l),l.success?(console.log("Registration successful, redirecting to profile completion..."),u({email:"",password:"",confirmPassword:"",firstName:"",lastName:""}),setTimeout(()=>{o("/auth/employee-profile-complete",{replace:!0})},500)):(clearTimeout(m),console.error("Registration failed:",l.error),c({submit:l.error||"Registration failed. Please try again."}),t(!1))}catch(i){clearTimeout(m),console.error("Registration error:",i);const l=i instanceof Error?i.message:"An error occurred during registration";c({submit:l}),t(!1)}}}},S=()=>{const{formData:o,errors:a,loading:n,handleChange:t,handleSubmit:s}=F();return e.jsxs("form",{onSubmit:s,className:"authentication-form",children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"empFirstName",className:"form-label",children:["First Name ",e.jsx("small",{children:"*"})]}),e.jsx("input",{type:"text",className:"form-control",id:"empFirstName",placeholder:"First Name",name:"firstName",value:o.firstName,onChange:t}),a.firstName&&e.jsx("small",{className:"text-danger",children:a.firstName})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"empLastName",className:"form-label",children:["Last Name ",e.jsx("small",{children:"*"})]}),e.jsx("input",{type:"text",className:"form-control",id:"empLastName",placeholder:"Last Name",name:"lastName",value:o.lastName,onChange:t}),a.lastName&&e.jsx("small",{className:"text-danger",children:a.lastName})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"empRegEmail",className:"form-label",children:["Email ",e.jsx("small",{children:"*"})]}),e.jsx("input",{type:"email",className:"form-control",id:"empRegEmail",placeholder:"Email",name:"email",value:o.email,onChange:t}),a.email&&e.jsx("small",{className:"text-danger",children:a.email})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"empRegPassword",className:"form-label",children:["Password ",e.jsx("small",{children:"*"})]}),e.jsx("input",{type:"password",className:"form-control",id:"empRegPassword",placeholder:"Enter password",name:"password",value:o.password,onChange:t}),a.password&&e.jsx("small",{className:"text-danger",children:a.password})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"empRegConfirmPassword",className:"form-label",children:["Confirm Password ",e.jsx("small",{children:"*"})]}),e.jsx("input",{type:"password",className:"form-control",id:"empRegConfirmPassword",placeholder:"Confirm password",name:"confirmPassword",value:o.confirmPassword,onChange:t}),a.confirmPassword&&e.jsx("small",{className:"text-danger",children:a.confirmPassword})]}),a.submit&&e.jsx("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:a.submit}),e.jsx("div",{className:"mb-0 text-center d-grid",children:e.jsx("button",{className:"btn btn-primary",type:"submit",disabled:n,style:{opacity:n?.6:1,cursor:n?"not-allowed":"pointer"},children:n?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Registering..."]}):"Sign Up"})})]})},I=()=>e.jsx("div",{className:"bg-gradient2 min-vh-100 align-items-center d-flex justify-content-center pt-2 pt-sm-5 pb-4 pb-sm-5",children:e.jsx(y,{children:e.jsx(p,{className:"justify-content-center",children:e.jsxs(d,{xl:12,children:[e.jsx(R,{children:e.jsx(C,{className:"p-0",children:e.jsxs(p,{className:"g-0",children:[e.jsx(d,{md:5,className:"shadow",children:e.jsxs("div",{className:"p-xl-5 p-3",children:[e.jsx("div",{className:"mx-auto mb-5",children:e.jsx(f,{to:"/",className:"d-flex",children:e.jsx(E,{src:P,className:"align-self-center",alt:"logo-img",height:30})})}),e.jsx("h6",{className:"h5 mb-0 mt-3",children:"Create Account"}),e.jsx("p",{className:"text-muted mt-1 mb-4",children:"Sign up to get started with your employee account."}),e.jsx(S,{})]})}),e.jsx(d,{md:5,className:"offset-md-1 d-none d-md-inline-block",children:e.jsx("div",{className:"position-relative mt-5 pt-5",children:e.jsx(v,{})})})]})})}),e.jsx(p,{className:"mt-3",children:e.jsx(d,{xs:12,className:"text-center",children:e.jsxs("p",{className:"text-muted",children:["Already have an account?"," ",e.jsx(f,{to:"/auth/employee-login",className:"text-primary fw-semibold ms-1",children:"Sign In"})]})})})]})})})});export{I as default};
