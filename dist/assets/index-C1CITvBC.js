import{r as c,o as C,j as e,p as I,A as M,v as J,B as x,P as a,C as L,R as g,a as b,I as P}from"./index-oF94shAn.js";import{T as G}from"./Table-FLAXzD0V.js";import{M as h}from"./Modal-Cn1xx1qV.js";import"./NoopTransition-D_1AYpEs.js";const S=c.forwardRef(({bsPrefix:l,variant:t,animation:r="border",size:i,as:n="div",className:d,...m},s)=>{l=C(l,"spinner");const o=`${l}-${r}`;return e.jsx(n,{ref:s,...m,className:I(d,o,i&&`${o}-${i}`,t&&`text-${t}`)})});S.displayName="Spinner";const F=()=>{const[l,t]=c.useState([]),[r,i]=c.useState(!0),[n,d]=c.useState(null);c.useEffect(()=>{try{const s=localStorage.getItem("payrolls");s&&t(JSON.parse(s))}catch(s){console.error("Failed to load payroll data:",s),d("Failed to load payroll data")}finally{i(!1)}},[]);const m=s=>{const o=l.map(u=>u.id===s?{...u,status:"paid"}:u);t(o),localStorage.setItem("payrolls",JSON.stringify(o))};return e.jsxs("div",{className:"card",children:[n&&e.jsx(M,{variant:"danger",className:"m-3",children:n}),r?e.jsx("div",{className:"d-flex justify-content-center align-items-center p-5",children:e.jsx(S,{animation:"border"})}):e.jsx("div",{className:"card-body p-0",children:e.jsx("div",{className:"table-responsive",children:e.jsxs(G,{striped:!0,hover:!0,className:"mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:"Employee"}),e.jsx("th",{children:"Month/Year"}),e.jsx("th",{children:"Basic Salary"}),e.jsx("th",{children:"Allowances"}),e.jsx("th",{children:"Deductions"}),e.jsx("th",{children:"Net Salary"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:l.length>0?l.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.employeeName}),e.jsxs("td",{children:[s.month," ",s.year]}),e.jsxs("td",{children:["$",s.basicSalary.toLocaleString()]}),e.jsxs("td",{children:["$",s.allowances.toLocaleString()]}),e.jsxs("td",{children:["$",s.deductions.toLocaleString()]}),e.jsxs("td",{children:["$",s.netSalary.toLocaleString()]}),e.jsx("td",{children:e.jsx(J,{bg:s.status==="paid"?"success":"warning",children:s.status})}),e.jsx("td",{children:s.status==="pending"&&e.jsx(x,{variant:"success",size:"sm",onClick:()=>m(s.id),children:"Mark Paid"})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"text-center py-4",children:"No payroll records. Generate payroll to get started."})})})]})})})]})},A=({show:l,onHide:t})=>{const[r,i]=c.useState({employeeId:"",month:"",year:"",basicSalary:"",allowances:"",deductions:""}),n=s=>{i({...r,[s.target.name]:s.target.value})},d=s=>{s.preventDefault();const o=JSON.parse(localStorage.getItem("payrolls")||"[]"),v=JSON.parse(localStorage.getItem("employees")||"[]").find(w=>w.id===r.employeeId),p=parseFloat(r.basicSalary),j=parseFloat(r.allowances),y=parseFloat(r.deductions),N=p+j-y,f={id:Date.now(),employeeId:parseInt(r.employeeId),employeeName:v?.name||"Unknown",month:r.month,year:parseInt(r.year),basicSalary:p,allowances:j,deductions:y,netSalary:N,status:"pending"};o.push(f),localStorage.setItem("payrolls",JSON.stringify(o)),t(),i({employeeId:"",month:"",year:"",basicSalary:"",allowances:"",deductions:""}),window.location.reload()},m=JSON.parse(localStorage.getItem("employees")||"[]");return e.jsxs(h,{show:l,onHide:t,children:[e.jsx(h.Header,{closeButton:!0,children:e.jsx(h.Title,{children:"Generate Payroll"})}),e.jsxs(a,{onSubmit:d,children:[e.jsxs(h.Body,{children:[e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"Employee"}),e.jsxs(a.Select,{name:"employeeId",value:r.employeeId,onChange:n,required:!0,children:[e.jsx("option",{value:"",children:"Select Employee"}),m.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"Month"}),e.jsxs(a.Select,{name:"month",value:r.month,onChange:n,required:!0,children:[e.jsx("option",{value:"",children:"Select Month"}),e.jsx("option",{value:"January",children:"January"}),e.jsx("option",{value:"February",children:"February"}),e.jsx("option",{value:"March",children:"March"}),e.jsx("option",{value:"April",children:"April"}),e.jsx("option",{value:"May",children:"May"}),e.jsx("option",{value:"June",children:"June"}),e.jsx("option",{value:"July",children:"July"}),e.jsx("option",{value:"August",children:"August"}),e.jsx("option",{value:"September",children:"September"}),e.jsx("option",{value:"October",children:"October"}),e.jsx("option",{value:"November",children:"November"}),e.jsx("option",{value:"December",children:"December"})]})]}),e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"Year"}),e.jsx(a.Control,{type:"number",name:"year",value:r.year,onChange:n,required:!0})]}),e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"Basic Salary"}),e.jsx(a.Control,{type:"number",name:"basicSalary",value:r.basicSalary,onChange:n,required:!0})]}),e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"Allowances"}),e.jsx(a.Control,{type:"number",name:"allowances",value:r.allowances,onChange:n,required:!0})]}),e.jsxs(a.Group,{className:"mb-3",children:[e.jsx(a.Label,{children:"Deductions"}),e.jsx(a.Control,{type:"number",name:"deductions",value:r.deductions,onChange:n,required:!0})]})]}),e.jsxs(h.Footer,{children:[e.jsx(x,{variant:"secondary",onClick:t,children:"Cancel"}),e.jsx(x,{variant:"primary",type:"submit",children:"Generate"})]})]})]})},E=()=>{const[l,t]=c.useState(!1);return e.jsxs("section",{className:"position-relative overflow-hidden bg-gradient2 py-2 px-2",children:[e.jsxs(L,{fluid:!0,className:"px-2 px-md-3 px-lg-4",children:[e.jsx(g,{className:"mb-3",children:e.jsxs(b,{xs:12,className:"d-flex flex-column flex-sm-row justify-content-between align-items-start align-sm-items-center gap-3",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"mb-0 text-primary fs-5 fs-sm-4",children:"Payroll Management"}),e.jsx("p",{className:"mt-1 fw-medium text-muted mb-0",children:"Process employee salaries"})]}),e.jsxs(x,{variant:"primary",size:"sm",onClick:()=>t(!0),className:"d-flex align-items-center gap-2 flex-grow-1 flex-sm-grow-0 justify-content-center",children:[e.jsx(P,{icon:"lucide:dollar-sign",height:16,width:16}),"Generate Payroll"]})]})}),e.jsx(g,{children:e.jsx(b,{xs:12,children:e.jsx(F,{})})})]}),e.jsx(A,{show:l,onHide:()=>t(!1)})]})};export{E as default};
