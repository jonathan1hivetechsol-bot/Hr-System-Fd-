import{r as n,j as e,P as s,B as p}from"./index-DE-dWZLt.js";import{M as i}from"./Modal-B0gmlYRD.js";import{I as b}from"./Image-Co2N5oKX.js";import{P}from"./ProgressBar-CsJLuwf8.js";const B=({show:g,onHide:c,employee:r,onSave:v})=>{const[t,f]=n.useState({name:r.name||"",phone:r.phone||"",address:r.address||"",position:r.position||"",department:r.department||""}),[l,C]=n.useState(null),[d,h]=n.useState(!1),[u,x]=n.useState(null),[j,N]=n.useState(0);n.useEffect(()=>{if(l){const a=URL.createObjectURL(l);return x(a),()=>URL.revokeObjectURL(a)}else x(null)},[l]);const o=a=>{f({...t,[a.target.name]:a.target.value})},L=a=>{a.target.files&&a.target.files[0]&&C(a.target.files[0])},S=async a=>{a.preventDefault(),h(!0);try{await v(r.id,{...t},l,m=>{N(m)}),c()}catch(m){console.error(m)}finally{h(!1)}};return e.jsxs(i,{show:g,onHide:c,centered:!0,children:[e.jsx(i.Header,{closeButton:!0,children:e.jsx(i.Title,{children:"Edit Profile"})}),e.jsxs(s,{onSubmit:S,children:[e.jsxs(i.Body,{children:[e.jsx("div",{className:"text-center mb-3",children:e.jsx(b,{src:u||r.avatar,roundedCircle:!0,height:80,width:80})}),e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{children:"Full Name"}),e.jsx(s.Control,{name:"name",value:t.name,onChange:o})]}),e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{children:"Phone"}),e.jsx(s.Control,{name:"phone",value:t.phone,onChange:o})]}),e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{children:"Address"}),e.jsx(s.Control,{name:"address",value:t.address,onChange:o})]}),e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{children:"Position"}),e.jsx(s.Control,{name:"position",value:t.position,onChange:o})]}),e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{children:"Department"}),e.jsx(s.Control,{name:"department",value:t.department,onChange:o})]}),e.jsxs(s.Group,{className:"mb-2",children:[e.jsx(s.Label,{children:"Avatar"}),e.jsx(s.Control,{type:"file",accept:"image/*",onChange:L}),l&&e.jsxs("div",{className:"mt-2",children:[e.jsx("small",{className:"text-muted d-block mb-1",children:"Preview"}),e.jsx("div",{className:"mb-2",children:e.jsx(b,{src:u,rounded:!0,height:60,width:60})}),e.jsx(P,{now:j,label:`${j}%`})]})]})]}),e.jsxs(i.Footer,{children:[e.jsx(p,{variant:"secondary",onClick:c,disabled:d,children:"Cancel"}),e.jsx(p,{variant:"primary",type:"submit",disabled:d,children:d?"Saving...":"Save"})]})]})]})};export{B as E};
