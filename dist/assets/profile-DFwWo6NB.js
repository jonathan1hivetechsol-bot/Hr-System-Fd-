import{X as b,t as v,r as o,j as s,C as m,L as f,R as r,a,B,v as C,w as S,Y as k,Z as y}from"./index-DE-dWZLt.js";import{E as D}from"./EditEmployeeModal-Bk143NZQ.js";import{I as L}from"./Image-Co2N5oKX.js";import"./Modal-B0gmlYRD.js";import"./NoopTransition-l41-TLGY.js";import"./ProgressBar-CsJLuwf8.js";const U=()=>{const{id:l}=b(),{canEditEmployee:E}=v(),[e,c]=o.useState(null),[g,h]=o.useState(!0),[N,x]=o.useState(!1);return o.useEffect(()=>{if(!l)return;(async()=>{h(!0);const n=await y("employees",l);n.success&&n.data?c(n.data):c(null),h(!1)})()},[l]),g?s.jsx(m,{children:"Loading..."}):e?s.jsxs("section",{className:"py-3",children:[s.jsxs(m,{children:[s.jsx(r,{className:"mb-3",children:s.jsxs(a,{xs:12,className:"d-flex justify-content-between align-items-center",children:[s.jsx("h4",{className:"mb-0",children:e.name}),s.jsxs("div",{children:[s.jsx(f,{to:"/employees",className:"btn btn-light me-2",children:"Back"}),E(e.id)&&s.jsx(B,{onClick:()=>x(!0),variant:"primary",children:"Edit Profile"})]})]})}),s.jsxs(r,{children:[s.jsxs(a,{md:4,className:"text-center",children:[s.jsx(L,{src:e.avatar,roundedCircle:!0,height:140,width:140}),s.jsx("h5",{className:"mt-2",children:e.position}),s.jsx(C,{bg:"secondary",children:e.department})]}),s.jsxs(a,{md:8,children:[s.jsxs(r,{className:"mb-2",children:[s.jsx(a,{sm:4,children:s.jsx("strong",{children:"Email"})}),s.jsx(a,{sm:8,children:e.email})]}),s.jsxs(r,{className:"mb-2",children:[s.jsx(a,{sm:4,children:s.jsx("strong",{children:"Phone"})}),s.jsx(a,{sm:8,children:e.phone||"Not provided"})]}),s.jsxs(r,{className:"mb-2",children:[s.jsx(a,{sm:4,children:s.jsx("strong",{children:"Address"})}),s.jsx(a,{sm:8,children:e.address||"Not provided"})]}),s.jsxs(r,{className:"mb-2",children:[s.jsx(a,{sm:4,children:s.jsx("strong",{children:"Joined"})}),s.jsx(a,{sm:8,children:e.hireDate})]})]})]})]}),s.jsx(D,{show:N,onHide:()=>x(!1),employee:e,onSave:async(i,n,j,w)=>{try{let t;if(j){const p=await S(i,j,w);p.success&&(t=p.data)}const u={...n};t&&(u.avatar=t),await k(i,u);const d=await y("employees",i);d.success&&d.data&&c(d.data)}catch(t){throw console.error(t),t}}})]}):s.jsxs(m,{children:["Employee not found. ",s.jsx(f,{to:"/employees",children:"Back to list"})]})};export{U as default};
